<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Keep previous styles, add these new styles -->
    <style>
        .game-board {
            position: relative;
            width: 600px;
            height: 600px;
            background: #fff;
            border-radius: 10px;
        }

        .path {
            stroke: #000;
            stroke-width: 2;
            fill: none;
        }

        .token {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            position: absolute;
            transition: all 0.3s;
            cursor: pointer;
        }

        .dice {
            width: 60px;
            height: 60px;
            background: #fff;
            border: 2px solid #000;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <!-- Keep previous HTML structure, add these new elements -->
    <div class="game-info">
        <div id="currentTurn"></div>
        <div class="dice" onclick="rollDice()">0</div>
    </div>

    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script>
        const socket = io('YOUR_BACKEND_URL');
        let currentRoomId;
        let gameState;

        // Initialize game board with SVG paths
        function initBoard() {
            const board = document.getElementById('gameBoard');
            const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
            svg.setAttribute('width', '100%');
            svg.setAttribute('height', '100%');
            
            // Add Ludo board paths (simplified example)
            const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            path.setAttribute('d', 'M100,100 L500,100 L500,500 L100,500 Z');
            path.classList.add('path');
            svg.appendChild(path);
            
            board.appendChild(svg);
        }

        function updateGameState(newState) {
            gameState = newState;
            updateTokens();
            document.getElementById('currentTurn').textContent = 
                `Current Turn: ${gameState.players[gameState.currentTurn].name}`;
        }

        function updateTokens() {
            gameState.players.forEach(player => {
                player.pieces.forEach((piece, index) => {
                    const token = document.getElementById(`token-${player.id}-${index}`);
                    if (!token) {
                        const newToken = document.createElement('div');
                        newToken.id = `token-${player.id}-${index}`;
                        newToken.classList.add('token');
                        newToken.style.backgroundColor = player.color;
                        document.getElementById('gameBoard').appendChild(newToken);
                    }
                    // Calculate position based on path index
                });
            });
        }

        function rollDice() {
            socket.emit('rollDice', currentRoomId);
        }

        // Add WebSocket listeners
        socket.on('gameStarted', (initialState) => {
            updateGameState(initialState);
            initBoard();
        });

        socket.on('diceRolled', (value) => {
            document.querySelector('.dice').textContent = value;
        });

        socket.on('pieceMoved', (pieceIndex) => {
            // Update piece position
        });

        // Modify previous functions to use WebSocket
        function handleRoomAction() {
            const playerName = document.getElementById('playerName').value;
            const roomId = document.getElementById('roomId').value;
            
            if (roomId) {
                socket.emit('joinRoom', { roomId, playerName });
                currentRoomId = roomId;
            } else {
                socket.emit('createRoom', { playerName });
            }
        }

        socket.on('roomCreated', (roomId) => {
            currentRoomId = roomId;
            showLobby();
        });

        socket.on('playerJoined', (players) => {
            updatePlayersList(players);
        });
    </script>
</body>
</html>
